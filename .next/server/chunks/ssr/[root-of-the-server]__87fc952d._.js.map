{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshviswanadhapalli/delivery-admin/src/components/Layout.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logoutUser } from \"../store/slices/authSlice\";\nimport { \n  LayoutDashboard, \n  Users, \n  Package, \n  DollarSign, \n  Menu, \n  X, \n  LogOut,\n  TrendingUp,\n  UserCheck,\n  School\n} from \"lucide-react\";\n\nconst navigation = [\n  { name: \"Dashboard\", href: \"/dashboard\", icon: LayoutDashboard },\n  { name: \"Users\", href: \"/users\", icon: Users },\n  { name: \"Orders\", href: \"/orders\", icon: Package },\n  { name: \"Prices\", href: \"/prices\", icon: DollarSign },\n  { name: \"Schools\", href: \"/schools\", icon: School },\n  { name: \"Feedbacks\", href: \"/feedbacks\", icon: TrendingUp }, \n];\n\nexport default function Layout({ children }) {\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [mounted, setMounted] = useState(false);\n  const router = useRouter();\n  const pathname = usePathname();\n  const dispatch = useDispatch();\n  const { isAuthenticated, loading } = useSelector((state) => state.auth);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  useEffect(() => {\n    if (mounted && !loading && !isAuthenticated && pathname !== \"/login\") {\n      router.push(\"/login\");\n    }\n  }, [isAuthenticated, loading, pathname, router, mounted]);\n\n  const handleLogout = () => {\n    dispatch(logoutUser());\n    router.push(\"/login\");\n  };\n\n  // Don't render anything until mounted to prevent hydration mismatch\n  if (!mounted) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (pathname === \"/login\") {\n    return children;\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Mobile sidebar */}\n      <div className={`fixed inset-0 z-50 lg:hidden ${sidebarOpen ? \"block\" : \"hidden\"}`}>\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75\" onClick={() => setSidebarOpen(false)} />\n        <div className=\"fixed inset-y-0 left-0 flex w-64 flex-col bg-white\">\n          <div className=\"flex h-16 items-center justify-between px-4\">\n            <h1 className=\"text-xl font-bold text-gray-900\">Admin Dashboard</h1>\n            <button\n              onClick={() => setSidebarOpen(false)}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n          <nav className=\"flex-1 space-y-1 px-2 py-4\">\n            {navigation.map((item) => {\n              const isActive = pathname === item.href;\n              return (\n                <a\n                  key={item.name}\n                  href={item.href}\n                  className={`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${\n                    isActive\n                      ? \"bg-blue-100 text-blue-900\"\n                      : \"text-gray-600 hover:bg-gray-50 hover:text-gray-900\"\n                  }`}\n                >\n                  <item.icon className=\"mr-3 h-5 w-5\" />\n                  {item.name}\n                </a>\n              );\n            })}\n          </nav>\n          <div className=\"border-t border-gray-200 p-4\">\n            <button\n              onClick={handleLogout}\n              className=\"flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md transition-colors\"\n            >\n              <LogOut className=\"mr-3 h-5 w-5\" />\n              Logout\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Desktop sidebar */}\n      <div className=\"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col\">\n        <div className=\"flex flex-col flex-grow bg-white border-r border-gray-200\">\n          <div className=\"flex h-16 items-center px-4\">\n            <h1 className=\"text-xl font-bold text-gray-900\">Admin Dashboard</h1>\n          </div>\n          <nav className=\"flex-1 space-y-1 px-2 py-4\">\n            {navigation.map((item) => {\n              const isActive = pathname === item.href;\n              return (\n                <a\n                  key={item.name}\n                  href={item.href}\n                  className={`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${\n                    isActive\n                      ? \"bg-blue-100 text-blue-900\"\n                      : \"text-gray-600 hover:bg-gray-50 hover:text-gray-900\"\n                  }`}\n                >\n                  <item.icon className=\"mr-3 h-5 w-5\" />\n                  {item.name}\n                </a>\n              );\n            })}\n          </nav>\n          <div className=\"border-t border-gray-200 p-4\">\n            <button\n              onClick={handleLogout}\n              className=\"flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md transition-colors\"\n            >\n              <LogOut className=\"mr-3 h-5 w-5\" />\n              Logout\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"lg:pl-64\">\n        <div className=\"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8\">\n          <button\n            type=\"button\"\n            className=\"-m-2.5 p-2.5 text-gray-700 lg:hidden\"\n            onClick={() => setSidebarOpen(true)}\n          >\n            <Menu className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <main className=\"py-6\">\n          <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshviswanadhapalli/delivery-admin/src/utils/axios.js"],"sourcesContent":["import axios from 'axios';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: 'https://middaybox-backend.onrender.com/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('adminToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle errors\napi.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    if (error.response?.status === 401) {\n      // Token expired or invalid - clear token and redirect\n      localStorage.removeItem('adminToken');\n      if (typeof window !== 'undefined') {\n        window.location.href = '/login';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api; "],"names":[],"mappings":";;;AAAA;;AAEA,wBAAwB;AACxB,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,mCAAmC;AACnC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,wCAAwC;AACxC,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC;IACC,OAAO;AACT,GACA,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,sDAAsD;QACtD,aAAa,UAAU,CAAC;QACxB;;IAGF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshviswanadhapalli/delivery-admin/src/services/apiService.js"],"sourcesContent":["import api from '../utils/axios';\n\n// Auth API\nexport const authAPI = {\n  login: (credentials) => api.post('/admin/login', credentials),\n  logout: () => api.post('/admin/logout'),\n  getProfile: () => api.get('/admin/profile'),\n};\n\n// Stats API\nexport const statsAPI = {\n  getStats: () => api.get('/admin/stats'),\n  getDashboardData: () => api.get('/admin/dashboard'),\n};\n\n// Users API\nexport const usersAPI = {\n  getDeliveryBoys: (params) => api.get('/admin/delivery-boys', { params }),\n  getParents: (params) => api.get('/admin/parents', { params }),\n  createDeliveryBoy: (data) => api.post('/admin/delivery-boys', data),\n  createParent: (data) => api.post('/admin/parents', data),\n  updateDeliveryBoy: (id, data) => api.put(`/admin/delivery-boys/${id}`, data),\n  updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n  deleteDeliveryBoy: (id) => api.delete(`/admin/delivery-boys/${id}`),\n  deleteParent: (id) => api.delete(`/admin/parents/${id}`),\n};\n\n// Orders API\nexport const ordersAPI = {\n  getOrders: (params) => api.get('/admin/orders', { params }),\n  getOrder: (id) => api.get(`/admin/orders/${id}`),\n  updateOrderStatus: (id, status) => api.patch(`/admin/orders/${id}/status`, { status }),\n  exportOrders: (params) => api.get('/admin/orders/export', { \n    params,\n    responseType: 'blob'\n  }),\n};\n\n// Pricing API\nexport const pricingAPI = {\n  getPricing: () => api.get('/admin/pricing'),\n  updatePricing: (data) => api.patch('/admin/pricing', data),\n  calculatePrice: (distance) => api.post('/admin/pricing/calculate', { distance }),\n};\n\n// Schools API\nexport const schoolsAPI = {\n  getSchools: () => api.get('/admin/schools'),\n  createSchool: (data) => api.post('/admin/schools', data),\n  updateSchool: (id, data) => api.put(`/admin/schools/${id}`, data),\n  deleteSchool: (id) => api.delete(`/admin/schools/${id}`),\n};\n\n// Generic API helper\nexport const apiHelper = {\n  handleResponse: (response) => response.data,\n  handleError: (error) => {\n    if (error.response?.status === 401) {\n      // Handle unauthorized access\n      localStorage.removeItem('adminToken');\n      window.location.href = '/login';\n    }\n    throw error;\n  },\n}; "],"names":[],"mappings":";;;;;;;;;AAAA;;AAGO,MAAM,UAAU;IACrB,OAAO,CAAC,cAAgB,qHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,gBAAgB;IACjD,QAAQ,IAAM,qHAAA,CAAA,UAAG,CAAC,IAAI,CAAC;IACvB,YAAY,IAAM,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;AAC5B;AAGO,MAAM,WAAW;IACtB,UAAU,IAAM,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IACxB,kBAAkB,IAAM,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;AAClC;AAGO,MAAM,WAAW;IACtB,iBAAiB,CAAC,SAAW,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,wBAAwB;YAAE;QAAO;IACtE,YAAY,CAAC,SAAW,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,kBAAkB;YAAE;QAAO;IAC3D,mBAAmB,CAAC,OAAS,qHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,wBAAwB;IAC9D,cAAc,CAAC,OAAS,qHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,kBAAkB;IACnD,mBAAmB,CAAC,IAAI,OAAS,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,qBAAqB,EAAE,IAAI,EAAE;IACvE,cAAc,CAAC,IAAI,OAAS,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,EAAE;IAC5D,mBAAmB,CAAC,KAAO,qHAAA,CAAA,UAAG,CAAC,MAAM,CAAC,CAAC,qBAAqB,EAAE,IAAI;IAClE,cAAc,CAAC,KAAO,qHAAA,CAAA,UAAG,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,IAAI;AACzD;AAGO,MAAM,YAAY;IACvB,WAAW,CAAC,SAAW,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,iBAAiB;YAAE;QAAO;IACzD,UAAU,CAAC,KAAO,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,IAAI;IAC/C,mBAAmB,CAAC,IAAI,SAAW,qHAAA,CAAA,UAAG,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,GAAG,OAAO,CAAC,EAAE;YAAE;QAAO;IACpF,cAAc,CAAC,SAAW,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,wBAAwB;YACxD;YACA,cAAc;QAChB;AACF;AAGO,MAAM,aAAa;IACxB,YAAY,IAAM,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,eAAe,CAAC,OAAS,qHAAA,CAAA,UAAG,CAAC,KAAK,CAAC,kBAAkB;IACrD,gBAAgB,CAAC,WAAa,qHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,4BAA4B;YAAE;QAAS;AAChF;AAGO,MAAM,aAAa;IACxB,YAAY,IAAM,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,cAAc,CAAC,OAAS,qHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,kBAAkB;IACnD,cAAc,CAAC,IAAI,OAAS,qHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,EAAE;IAC5D,cAAc,CAAC,KAAO,qHAAA,CAAA,UAAG,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,IAAI;AACzD;AAGO,MAAM,YAAY;IACvB,gBAAgB,CAAC,WAAa,SAAS,IAAI;IAC3C,aAAa,CAAC;QACZ,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;YAClC,6BAA6B;YAC7B,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;QACA,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshviswanadhapalli/delivery-admin/src/app/prices/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { Save, Plus, IndianRupee, Percent, Tag } from \"lucide-react\";\nimport Layout from \"../../components/Layout\";\nimport { pricingAPI, apiHelper } from \"../../services/apiService\";\nimport toast from \"react-hot-toast\";\n\nconst DEFAULT_TIERS = [\n  { label: \"0-2 km\", price: 25 },\n  { label: \"2-3 km\", price: 30 },\n  { label: \"3-4 km\", price: 35 },\n  { label: \"4-6 km\", price: 45 },\n];\n\n// ✅ Validation schema update\nconst schema = yup\n  .object({\n    gstPercent: yup\n      .number()\n      .typeError(\"GST must be a number\")\n      .min(0, \"GST cannot be negative\")\n      .max(100, \"GST cannot exceed 100%\")\n      .required(\"GST is required\"),\n    serviceChargePercent: yup\n      .number()\n      .typeError(\"Service charge must be a number\")\n      .min(0, \"Service charge cannot be negative\")\n      .max(100, \"Service charge cannot exceed 100%\")\n      .required(\"Service charge is required\"),\n    boxPrice: yup\n      .number()\n      .typeError(\"Price for one box must be a number\")\n      .min(0, \"Price for one box cannot be negative\")\n      .required(\"Price for one box is required\"),\n    tiers: yup\n      .array()\n      .of(\n        yup.object({\n          label: yup.string().trim().required(\"Label is required\"),\n          price: yup\n            .number()\n            .typeError(\"Price must be a number\")\n            .min(0, \"Price cannot be negative\")\n            .required(\"Price is required\"),\n        })\n      )\n      .min(1, \"At least one tier is required\"),\n  })\n  .required();\n\nexport default function PricesPage() {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isFetching, setIsFetching] = useState(true);\n\n  const {\n    register,\n    control,\n    handleSubmit,\n    reset,\n    watch,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n    defaultValues: {\n      gstPercent: 3,\n      serviceChargePercent: 2,\n      boxPrice: 25,\n      tiers: DEFAULT_TIERS,\n    },\n  });\n\n  const { fields, append } = useFieldArray({ control, name: \"tiers\" });\n  const formValues = watch();\n\n  useEffect(() => {\n    let isMounted = true;\n    const fetchPricing = async () => {\n      try {\n        setIsFetching(true);\n        const response = await pricingAPI.getPricing();\n        const data = apiHelper.handleResponse(response);\n\n        if (!isMounted) return;\n\n        let normalized = {\n          gstPercent: 3,\n          serviceChargePercent: 2,\n          boxPrice: 25,\n          tiers: DEFAULT_TIERS,\n        };\n\n        if (data) {\n          if (typeof data.gstPercent === \"number\") normalized.gstPercent = data.gstPercent;\n          if (typeof data.serviceChargePercent === \"number\") normalized.serviceChargePercent = data.serviceChargePercent;\n          if (typeof data.boxPrice === \"number\") normalized.boxPrice = data.boxPrice;\n          if (Array.isArray(data.tiers) && data.tiers.length > 0) normalized.tiers = data.tiers;\n\n          if (data.pricing) {\n            if (typeof data.pricing.gstPercent === \"number\") normalized.gstPercent = data.pricing.gstPercent;\n            if (typeof data.pricing.serviceChargePercent === \"number\") normalized.serviceChargePercent = data.pricing.serviceChargePercent;\n            if (typeof data.pricing.boxPrice === \"number\") normalized.boxPrice = data.pricing.boxPrice;\n            if (Array.isArray(data.pricing.tiers)) normalized.tiers = data.pricing.tiers;\n          }\n        }\n\n        reset(normalized);\n      } catch (err) {\n        console.error(\"Error fetching pricing:\", err);\n      } finally {\n        if (isMounted) setIsFetching(false);\n      }\n    };\n    fetchPricing();\n    return () => {\n      isMounted = false;\n    };\n  }, [reset]);\n\n  const onSubmit = async (values) => {\n    setIsSubmitting(true);\n    try {\n      const saved = await pricingAPI.updatePricing(values).then(apiHelper.handleResponse);\n      toast.success(\"Pricing updated successfully\");\n    } catch (error) {\n      toast.error(error?.response?.data?.message || error.message || \"Failed to update pricing\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const gstMultiplier = useMemo(\n    () => 1 + (Number(formValues.gstPercent || 0) / 100),\n    [formValues.gstPercent]\n  );\n\n  const totalMultiplier = useMemo(\n    () =>\n      1 +\n      (Number(formValues.gstPercent || 0) + Number(formValues.serviceChargePercent || 0)) /\n        100,\n    [formValues.gstPercent, formValues.serviceChargePercent]\n  );\n\n  return (\n    <Layout>\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Pricing Management</h1>\n            <p className=\"text-gray-600\">\n              Define distance-based price tiers, per box, GST, and Service Charge\n            </p>\n          </div>\n          <button\n            type=\"button\"\n            onClick={() =>\n              reset({\n                gstPercent: 3,\n                serviceChargePercent: 2,\n                boxPrice: 25,\n                tiers: DEFAULT_TIERS,\n              })\n            }\n            className=\"px-3 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50\"\n          >\n            Reset to defaults\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\n            {/* Left Side - Distance-based tiers */}\n            <div className=\"xl:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200\">\n              <div className=\"p-6 border-b border-gray-100\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Distance-based Tiers</h3>\n              </div>\n\n              <div className=\"p-6 space-y-4\">\n                {fields.map((field, index) => (\n                  <div key={field.id} className=\"grid grid-cols-12 gap-3 items-center\">\n                    <div className=\"col-span-6\">\n                      <div className=\"relative\">\n                        <Tag className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n                        <input\n                          {...register(`tiers.${index}.label`)}\n                          type=\"text\"\n                          disabled\n                          placeholder=\"e.g. 0-2 km\"\n                          className=\"pl-9 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none text-sm text-gray-900\"\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"col-span-4\">\n                      <div className=\"relative\">\n                        <IndianRupee className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n                        <input\n                          {...register(`tiers.${index}.price`)}\n                          type=\"number\"\n                          min=\"0\"\n                          step=\"0.01\"\n                          className=\"pl-9 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none text-sm text-gray-900\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                <button\n                  type=\"button\"\n                  onClick={() => append({ label: \"\", price: 0 })}\n                  className=\"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 mt-3\"\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" /> Add Tier\n                </button>\n              </div>\n            </div>\n\n            {/* Right Side - GST, Service Charge, One Box */}\n            <div className=\"space-y-6\">\n              {/* GST */}\n              <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">GST (%)</h3>\n                </div>\n                <div className=\"p-6\">\n                  <div className=\"relative\">\n                    <Percent className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n                    <input\n                      {...register(\"gstPercent\")}\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"100\"\n                      step=\"0.01\"\n                      className=\"pl-9 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm text-gray-900\"\n                    />\n                  </div>\n                  {errors.gstPercent && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.gstPercent.message}</p>\n                  )}\n                </div>\n              </div>\n\n              {/* ✅ Service Charge */}\n              <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Service Charge (%)</h3>\n                </div>\n                <div className=\"p-6\">\n                  <div className=\"relative\">\n                    <Percent className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n                    <input\n                      {...register(\"serviceChargePercent\")}\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"100\"\n                      step=\"0.01\"\n                      className=\"pl-9 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm text-gray-900\"\n                    />\n                  </div>\n                  {errors.serviceChargePercent && (\n                    <p className=\"mt-1 text-sm text-red-600\">\n                      {errors.serviceChargePercent.message}\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Box Price */}\n              <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"p-6 border-b border-gray-100\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Price for One Box</h3>\n                </div>\n                <div className=\"p-6 space-y-2\">\n                  <div className=\"relative\">\n                    <IndianRupee className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n                    <input\n                      {...register(\"boxPrice\")}\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      className=\"pl-9 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm text-gray-900\"\n                    />\n                  </div>\n                  {errors.boxPrice && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.boxPrice.message}</p>\n                  )}\n                  <div className=\"mt-3 flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-500\">With GST + Service Charge:</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      ₹{(Number(formValues.boxPrice || 0) * totalMultiplier).toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Save Button */}\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              disabled={isSubmitting || isFetching}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\"\n            >\n              {isSubmitting ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Saving...\n                </>\n              ) : (\n                <>\n                  <Save className=\"mr-2 h-4 w-4\" /> Save Pricing\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </Layout>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}